---
title: Zustandë¥¼ ì‚¬ìš©í•´ì„œ ì „ì—­ìœ¼ë¡œ ëª¨ë‹¬ ê´€ë¦¬ í•˜ê¸°
date: 2023-2-28
summary: ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë‹¬ ê´€ë¦¬ë¥¼ ì¢€ ë” íš¨ìœ¨ì ìœ¼ë¡œ í•´ë³´ì.
tags: ['react', 'zustand', 'modal']
---

# ê°œìš”

ì‘ì—…ì„ í•˜ë‹¤ë³´ë©´ ì‚¬ìš©ìë“¤ì—ê²Œ ëª¨ë‹¬ì„ ì œê³µí•´ì•¼ í•˜ëŠ” ì¼ë“¤ì´ ìˆë‹¤. ê·¸ë¦¬ê³  ëª¨ë‹¬ì˜ ìƒíƒœë¥¼ ë°”ê¿”ì£¼ëŠ” í† ê¸€ ë²„íŠ¼ì´ ìì‹ ì»´í¬ë„ŒíŠ¸ì— ìˆëŠ” ê²½ìš°ë„ ì¦ì€ í¸ì´ë‹¤. ì´ë•Œ ëª¨ë‹¬ì˜ ìƒíƒœë¥¼ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê´€ë¦¬í•˜ê³  í† ê¸€ í•¨ìˆ˜ë¥¼ propsë¡œ ë‚´ë ¤ì£¼ëŠ” ì‹ìœ¼ë¡œ ì‘ì—…ì„ í–ˆì—ˆëŠ”ë°, ì´ ë°©ë²•ì—ì„œ ì•„ì‰¬ìš´ ì ì´ ëª‡ê°€ì§€ ìˆì—ˆë‹¤.

ê´€ë¦¬í•´ì•¼ í•˜ëŠ” í† ê¸€ì´ ë§ì•„ì§€ë©´ì„œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ëª¨ë‹¬ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ë‚´ë ¤ì¤˜ì•¼ í•˜ëŠ” í† ê¸€ í•¨ìˆ˜ë“¤ì´ ë§ì•„ì§€ë©´ì„œ ë‹¨ì¼ ì±…ì„ì—ì„œ ë²—ì–´ë‚˜ê¸° ì‹œì‘í–ˆë‹¤. ëª¨ë‹¬ì˜ ìƒíƒœëŠ” ë”°ë¡œ ê´€ì‹¬ì‚¬ë¥¼ ë‚˜ëˆ ì•¼ í•œë‹¤ëŠ” í•„ìš”ì„±ì´ ëŠê»´ì¡Œë‹¤.

ê·¸ë˜ì„œ ëª¨ë‹¬ì˜ ìƒíƒœì™€ í† ê¸€ í•¨ìˆ˜ë¥¼ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•´ì•¼ í•œë‹¤ê³  íŒë‹¨í–ˆê³  ê°€ë²¼ìš´ ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒí–ˆë‹¤.

## zustand

zustandëŠ” redux-toolkitê³¼ ê°™ì€ fluxíŒ¨í„´ìœ¼ë¡œ ê´€ë¦¬í•˜ë©´ì„œë„ ê·¸ì— ë¹„í•´ ìš©ëŸ‰ì€ ì—„ì²­ ê°€ë³ë‹¤. ì´ë²ˆ ëª©í‘œì— ë¶€í•©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.

### zustand í™ˆí˜ì´ì§€

[GitHub - pmndrs/zustand: ğŸ» Bear necessities for state management in React](https://github.com/pmndrs/zustand)

### zustand ì˜ ì‚¬ìš©í•˜ê¸°

[Working with Zustand](https://hyunjinee.notion.site/Working-with-Zustand-73c2d6bbb53d4c6e9944ddc5e23706a1)

ë‘ ë§í¬ë§Œ ì˜ ì½ì–´ë´ë„ zustandì˜ ê¸°ë³¸ ê¸°ëŠ¥ì€ í™•ì¸í•  ìˆ˜ ìˆë‹¤!

# Store ì½”ë“œ

- ê° ëª¨ë‹¬ì˜ ìƒíƒœ ê°’ê³¼ ìƒíƒœ ê°’ì„ ë°”ê¾¸ëŠ” í† ê¸€ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

  ```tsx
  import { create } from 'zustand';

  type Type = 'nickname' | 'profileImg' | 'setting' | 'write';

  interface ModalState {
    nickname: boolean;
    profileImg: boolean;
    setting: boolean;
    write: boolean;
    actions: {
      changeModalState: (type: Type) => void;
    };
  }

  const useModalStore = create<ModalState>((set) => ({
    nickname: false,
    profileImg: false,
    setting: false,
    write: false,
    actions: {
      changeModalState: (type) => {
        set((state) => ({ ...state, [type]: !state[type] }));
      },
    },
  }));

  export default useModalStore;

  export const useModalActions = () => useModalStore((state) => state.actions);

  export const useNicknameModalState = () => useModalStore((state) => state.nickname);
  export const useProfileImgModalState = () => useModalStore((state) => state.profileImg);

  export const useSettingDrawerState = () => useModalStore((state) => state.setting);
  export const useWriteDrawerState = () => useModalStore((state) => state.write);
  ```

# Component ì½”ë“œ

- í•„ìš”í•œ `store`ì˜ ìƒíƒœ ê°’ê³¼ í† ê¸€ í•¨ìˆ˜ë¥¼ `import` í•´ì„œ ì‚¬ìš©í•œë‹¤.

  ```tsx
  import { useModalActions, useNicknameModalState } from '@/store/useModalStore';

  const NicknameModal = ({ nickname, description }: Props) => {
    const nicknameModal = useNicknameModalState();
    const { changeModalState } = useModalActions();

    const handleClose = () => {
      changeModalState('nickname');
    };

    return (
      <Modal isCentered isOpen={nicknameModal} onClose={handleClose}>
        {/* Modal Contents... */}
      </Modal>
    );
  };

  export default NicknameModal;
  ```

  - ëª¨ë‹¬ì˜ ì˜¤í”ˆ ì—¬ë¶€ë¥¼ `store`ì˜ `boolean` ê°’ìœ¼ë¡œ íŒë‹¨í•˜ê³ , ëª¨ë‹¬ì´ ì—´ë¦¬ê±°ë‚˜ ë‹«íˆëŠ” ë²„íŠ¼ì„ ëˆŒë €ì„ë•Œ `changeModalState` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

# ë¹„ë°˜ì‘ì  ë°©ì‹ìœ¼ë¡œ store ê°’ì— ì ‘ê·¼í•˜ê¸°

- ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ê²ƒì²˜ëŸ¼ ë°˜ì‘ì´ í•„ìš”í•œ ê²½ìš°ì—ëŠ” storeì˜ ê°’ì´ ë°”ë¡œ ë°˜ì˜ëì§€ë§Œ, useEffect í•¨ìˆ˜ ë‚´ì—ì„œ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ëì„ ë•Œ í† ê¸€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì„œ ê°’ì„ ë°”ê¾¸ë ¤ê³  í•˜ë©´ storeì˜ ê°’ì´ ìµœì‹ í™”ê°€ ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤. ì´ ë¬¸ì œì˜ í•´ê²°ë²• ë˜í•œ ê³µì‹ í™ˆí˜ì´ì§€ì—ì„œ ì°¾ì•„ ë³¼ìˆ˜ ìˆë‹¤.
  [GitHub - pmndrs/zustand: ğŸ» Bear necessities for state management in React](https://github.com/pmndrs/zustand#readingwriting-state-and-reacting-to-changes-outside-of-components)
- ë‚˜ ê°™ì€ ê²½ìš°ì—ëŠ” ì†Œì…œ ë¡œê·¸ì¸ ì™¸ì— ì´ë©”ì¼ ë¡œê·¸ì¸ì„ ì„ íƒí•œ ìœ ì €ë“¤ì€ ì´ˆê¸° ë‹‰ë„¤ì„ ê°’ì´ `null`ì´ì—ˆê¸° ë•Œë¬¸ì—, ë‹‰ë„¤ì„ì´ ì—†ë‹¤ë©´ ë¨¼ì € ë‹‰ë„¤ì„ì„ ì„¤ì •í•´ë‹¬ë¼ëŠ” ëª¨ë‹¬ì„ ì œê³µí•´ì•¼ í–ˆë‹¤.

  ```tsx
  import { useEffect } from 'react';
  import { useSession } from 'next-auth/react';

  import NicknameModal from '@/components/common/NicknameModal';

  import useModalStore from '@/store/useModalStore';

  const NullNickname = () => {
    const { data: userData } = useSession();

    useEffect(() => {
      if (userData && !userData.user?.name) {
        useModalStore.setState({ nickname: true });
      }
    }, []);

    return (
      <>
        {userData && (
          <NicknameModal nickname="" description="ë‹‰ë„¤ì„ì´ ì—†ë„¤ìš”! ë‹‰ë„¤ì„ì„ ë¨¼ì € ì„¤ì •í•´ì£¼ì„¸ìš”." />
        )}
      </>
    );
  };

  export default NullNickname;
  ```

  - ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë˜ë©´ `userData`ì— ì ‘ê·¼í•˜ì—¬ ë‹‰ë„¤ì„ì´ ì—†ìœ¼ë©´ ë‹‰ë„¤ì„ ëª¨ë‹¬ì˜ ìƒíƒœë¥¼ `true`ë¡œ ë³€ê²½í•´ì£¼ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.
  - ì´ëŸ° í˜•íƒœë¡œ `setState` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ë°˜ì‘ì ìœ¼ë¡œ ë°”ë€ ê°’ë„ ìµœì‹ ì˜ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
